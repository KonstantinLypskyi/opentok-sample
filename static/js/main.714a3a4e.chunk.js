(this["webpackJsonpopen-took-sample-2"]=this["webpackJsonpopen-took-sample-2"]||[]).push([[0],{13:function(e,t,n){e.exports=n(30)},18:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var s=n(0),i=n.n(s),a=n(7),r=n.n(a),o=(n(18),n(3)),l=n.n(o),c=n(8),u=n(4),h=n(9),p=n(10),d=n(2),m=n(11),b=n(12),g=n(1),v=n.n(g),f=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={publisher:null,streamId:null,isActive:!1},e.handleError=function(e){e&&alert(e.message)},e.initializeSession=function(){var t=e.props,n=t.apiKey,s=t.sessionId,i=t.token;e.session=v.a.initSession(n,s);var a=v.a.initPublisher("original-publisher",{insertMode:"append",width:"100%",height:"100%"},e.handleError);e.session.connect(i,(function(t){t?e.handleError(t):(console.log(Object(d.a)(e)),e.session.publish(a,e.handleError))})),e.session.on("streamCreated",(function(t){"screen"===t.stream.videoType?(e.setState({isActive:!0,streamId:t.stream.id}),e.session.subscribe(t.stream,"original-screen",{insertMode:"append",width:"100%",height:"100%"},e.handleError)):e.session.subscribe(t.stream,"original-subscriber",{insertMode:"append",width:"100%",height:"100%"},e.handleError)})),e.session.on("streamDestroyed",(function(t){t.stream.id===e.state.streamId&&e.setState({publisher:null,streamId:null,isActive:!1})}))},e.handleStartShare=function(){return v.a.checkScreenSharingCapability((function(t){if(t.supported&&!1!==t.extensionRegistered)if(!1===t.extensionInstalled);else{var n=v.a.initPublisher("original-screen",{videoSource:"screen",insertMode:"append",width:"100%",height:"100%"},(function(t){t||e.session.publish(n,(function(e){}))}));n.on("streamDestroyed",(function(t){t.stream.id===e.state.streamId&&e.setState({publisher:null,streamId:null,isActive:!1})})),n.on("streamCreated",(function(t){e.setState({publisher:n,streamId:t.stream.id,isActive:!0})}))}else;}))},e.handleStopShare=function(){e.session.unpublish(e.state.publisher),e.setState({isActive:!1,publisher:null})},e.getOriginalSubscriberClassName=function(){return e.state.isActive?"original-subscriber":"original-subscriber--active"},e.getOriginalScreenClassName=function(){return e.state.isActive?"original-screen--active":"original-screen"},e.session=null,e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.initializeSession()}},{key:"render",value:function(){return i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"original-publisher",id:"original-publisher"}),i.a.createElement("div",{className:this.getOriginalSubscriberClassName(),id:"original-subscriber"}),i.a.createElement("div",{className:this.getOriginalScreenClassName(),id:"original-screen"})),!this.state.isActive&&i.a.createElement("button",{onClick:this.handleStartShare,className:"share-button"},"Start share"),this.state.publisher&&i.a.createElement("button",{onClick:this.handleStopShare,className:"share-button"},"Stop share"))}}]),n}(s.Component),S=function(){var e=Object(s.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(!1),o=Object(u.a)(r,2),h=o[0],p=o[1],d=function(){var e=Object(c.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://opentok-sample12.herokuapp.com/",p(!0),e.next=4,fetch("https://opentok-sample12.herokuapp.com//session");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,a(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n?i.a.createElement(f,n):h?i.a.createElement("div",null,"Loading ..."):i.a.createElement("button",{onClick:d},"Start a meeting")};r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(S,null)),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.714a3a4e.chunk.js.map