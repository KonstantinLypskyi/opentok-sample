{"version":3,"sources":["MeetingRoom.js","HomePage.js","index.js"],"names":["MeetingRoom","apiKey","sessionId","token","session","useRef","handleError","error","alert","message","useEffect","current","OT","initSession","publisher","initPublisher","insertMode","width","height","publishVideo","videoSource","on","console","log","connect","publish","event","subscriber","subscribe","stream","className","id","onClick","unblockAudio","then","catch","e","JSON","stringify","HomePage","useState","meetingData","setMeetingData","startMeeting","a","fetch","SERVER_BASE_URL","response","json","data","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mQAgFeA,EA7EK,SAAC,GAAkC,IAAhCC,EAA+B,EAA/BA,OAAQC,EAAuB,EAAvBA,UAAWC,EAAY,EAAZA,MAChCC,EAAUC,iBAAO,MAEjBC,EAAc,SAACC,GACbA,GAAOC,MAAMD,EAAME,UA8D3B,OAFAC,qBAjD0B,WACtBN,EAAQO,QAAUC,IAAGC,YAAYZ,EAAQC,GAEzC,IAAMY,EAAYF,IAAGG,cACjB,qBACA,CACIC,WAAY,SACZC,MAAO,OACPC,OAAQ,OACRC,cAAc,EACdC,aAAa,GAEjBd,GAGJQ,EAAUO,GAAG,gBAAgB,kBAAMC,QAAQC,IAAI,gCAE/CnB,EAAQO,QAAQa,QAAQrB,GAAO,SAACI,GACxBA,EACAD,EAAYC,GAEZH,EAAQO,QAAQc,QAAQX,EAAWR,MAI3CF,EAAQO,QAAQU,GAAG,gBAAgB,kBAAMb,MAAM,uBAE/CJ,EAAQO,QAAQU,GAAG,iBAAiB,SAACK,GAC7B,IAAMC,EAAavB,EAAQO,QAAQiB,UAC/BF,EAAMG,OACN,sBACA,CACIb,WAAY,SACZC,MAAO,OACPC,OAAQ,QAEZZ,GAGAqB,GACAA,EAAWN,GAAG,gBAAgB,kBAAMb,MAAM,0BAItDJ,EAAQO,QAAQU,GAAG,mBAAmB,SAAAK,GAClCJ,QAAQC,IAAI,gCAAiCG,QAIxB,IAGzB,qBAAKI,UAAU,MAAf,SACI,sBAAKA,UAAU,UAAf,UACI,qBAAKC,GAAG,qBAAqBD,UAAU,uBACvC,qBAAKC,GAAG,sBAAsBD,UAAU,wBACxC,wBAAQE,QAhEO,WACvBpB,IAAGqB,eACEC,MAAK,kBAAM1B,MAAM,cACjB2B,OAAM,SAACC,GACJ5B,MAAM,WAAD,OAAY6B,KAAKC,UAAUF,SA4DhC,iCCnDDG,EAnBE,WAAO,IAAD,EACmBC,mBAAS,MAD5B,mBACZC,EADY,KACCC,EADD,KAGbC,EAAY,uCAAG,8BAAAC,EAAA,4DACO,wCADP,SAGMC,MAAMC,iDAHZ,cAGXC,EAHW,gBAIEA,EAASC,OAJX,OAIXC,EAJW,OAMjBP,EAAeO,GANE,2CAAH,qDAWlB,OAFAvC,oBAAUiC,EAAc,IAEpBF,EAAoB,cAAC,EAAD,eAAkBA,IAEnC,6CCfXS,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.2b157257.chunk.js","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport OT from '@opentok/client';\n\nconst MeetingRoom = ({ apiKey, sessionId, token }) => {\n    const session = useRef(null);\n\n    const handleError = (error) => {\n        if (error) alert(error.message);\n    };\n\n    const handleUnBlockAudio = () => {\n        OT.unblockAudio()\n            .then(() => alert('success'))\n            .catch((e) => {\n                alert(`failed: ${JSON.stringify(e)}`);\n            });\n    }\n\n    const initializeSession = () => {\n        session.current = OT.initSession(apiKey, sessionId);\n\n        const publisher = OT.initPublisher(\n            'original-publisher',\n            {\n                insertMode: 'append',\n                width: '100%',\n                height: '100%',\n                publishVideo: false,\n                videoSource: false,\n            },\n            handleError\n        );\n\n        publisher.on('mediaStopped', () => console.log('media stopped event fired'));\n\n        session.current.connect(token, (error) => {\n            if (error) {\n                handleError(error);\n            } else {\n                session.current.publish(publisher, handleError);\n            }\n        });\n\n        session.current.on('audioBlocked', () => alert('audio is blocked'));\n\n        session.current.on('streamCreated', (event) => {\n                const subscriber = session.current.subscribe(\n                    event.stream,\n                    'original-subscriber',\n                    {\n                        insertMode: 'append',\n                        width: '100%',\n                        height: '100%',\n                    },\n                    handleError\n                );\n\n                if (subscriber) {\n                    subscriber.on('audioBlocked', () => alert('audio is blocked'));\n                }\n        });\n\n        session.current.on('streamDestroyed', event => {\n            console.log('subscriber stream destroyed: ', event);\n        })\n    }\n\n    useEffect(initializeSession, []);\n\n    return (\n        <div className=\"app\">\n            <div className=\"wrapper\">\n                <div id=\"original-publisher\" className=\"original-publisher\"></div>\n                <div id=\"original-subscriber\" className=\"original-subscriber\"></div>\n                <button onClick={handleUnBlockAudio}>Unblock audio</button>\n            </div>\n        </div>\n    );\n}\n\nexport default MeetingRoom;\n","import React, { useState, useEffect } from 'react';\n\nimport MeetingRoom from './MeetingRoom';\n\nconst HomePage = () => {\n    const [meetingData, setMeetingData] = useState(null);\n\n    const startMeeting = async () => {\n        const SERVER_BASE_URL = 'https://opentok-routed.herokuapp.com/';\n\n        const response = await fetch(SERVER_BASE_URL + '/session');\n        const data = await response.json();\n\n        setMeetingData(data);\n    }\n\n    useEffect(startMeeting, []);\n\n    if (meetingData) return <MeetingRoom { ...meetingData } />\n\n    return <div>321312123</div>;\n}\n\nexport default HomePage;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport HomePage from './HomePage';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HomePage />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}