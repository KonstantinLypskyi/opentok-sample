{"version":3,"sources":["MeetingRoom.js","HomePage.js","index.js"],"names":["MeetingRoom","apiKey","sessionId","token","session","useRef","handleError","error","alert","message","useEffect","current","OT","initSession","publisher","initPublisher","insertMode","width","height","publishVideo","videoSource","connect","publish","on","event","subscribe","stream","console","log","className","id","HomePage","useState","meetingData","setMeetingData","startMeeting","a","fetch","SERVER_BASE_URL","response","json","data","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mQA+DeA,EA5DK,SAAC,GAAkC,IAAhCC,EAA+B,EAA/BA,OAAQC,EAAuB,EAAvBA,UAAWC,EAAY,EAAZA,MAChCC,EAAUC,iBAAO,MAEjBC,EAAc,SAACC,GACbA,GAAOC,MAAMD,EAAME,UA8C3B,OAFAC,qBAzC0B,WACtBN,EAAQO,QAAUC,IAAGC,YAAYZ,EAAQC,GAEzC,IAAMY,EAAYF,IAAGG,cACjB,qBACA,CACIC,WAAY,SACZC,MAAO,OACPC,OAAQ,OACRC,cAAc,EACdC,YAAa,MAEjBd,GAGJF,EAAQO,QAAQU,QAAQlB,GAAO,SAACI,GACxBA,EACAD,EAAYC,GAEZH,EAAQO,QAAQW,QAAQR,EAAWR,MAI3CF,EAAQO,QAAQY,GAAG,iBAAiB,SAACC,GACjCpB,EAAQO,QAAQc,UACZD,EAAME,OACN,sBACA,CACIV,WAAY,SACZC,MAAO,OACPC,OAAQ,QAEZZ,MAIRF,EAAQO,QAAQY,GAAG,mBAAmB,SAAAC,GAClCG,QAAQC,IAAI,gCAAiCJ,QAIxB,IAGzB,qBAAKK,UAAU,MAAf,SACI,sBAAKA,UAAU,UAAf,UACI,qBAAKC,GAAG,qBAAqBD,UAAU,uBACvC,qBAAKC,GAAG,sBAAsBD,UAAU,8BClCzCE,EAnBE,WAAO,IAAD,EACmBC,mBAAS,MAD5B,mBACZC,EADY,KACCC,EADD,KAGbC,EAAY,uCAAG,8BAAAC,EAAA,4DACO,wCADP,SAGMC,MAAMC,iDAHZ,cAGXC,EAHW,gBAIEA,EAASC,OAJX,OAIXC,EAJW,OAMjBP,EAAeO,GANE,2CAAH,qDAWlB,OAFA/B,oBAAUyB,EAAc,IAEpBF,EAAoB,cAAC,EAAD,eAAkBA,IAEnC,mDCfXS,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.ed9bcebf.chunk.js","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport OT from '@opentok/client';\n\nconst MeetingRoom = ({ apiKey, sessionId, token }) => {\n    const session = useRef(null);\n\n    const handleError = (error) => {\n        if (error) alert(error.message);\n    };\n\n    const initializeSession = () => {\n        session.current = OT.initSession(apiKey, sessionId);\n\n        const publisher = OT.initPublisher(\n            'original-publisher',\n            {\n                insertMode: 'append',\n                width: '100%',\n                height: '100%',\n                publishVideo: false,\n                videoSource: null,\n            },\n            handleError\n        );\n\n        session.current.connect(token, (error) => {\n            if (error) {\n                handleError(error);\n            } else {\n                session.current.publish(publisher, handleError);\n            }\n        });\n\n        session.current.on('streamCreated', (event) => {\n            session.current.subscribe(\n                event.stream,\n                'original-subscriber',\n                {\n                    insertMode: 'append',\n                    width: '100%',\n                    height: '100%',\n                },\n                handleError\n            );\n        });\n\n        session.current.on('streamDestroyed', event => {\n            console.log('subscriber stream destroyed: ', event);\n        })\n    }\n\n    useEffect(initializeSession, []);\n\n    return (\n        <div className=\"app\">\n            <div className=\"wrapper\">\n                <div id=\"original-publisher\" className=\"original-publisher\"></div>\n                <div id=\"original-subscriber\" className=\"original-subscriber\"></div>\n            </div>\n        </div>\n    );\n}\n\nexport default MeetingRoom;\n","import React, { useState, useEffect } from 'react';\n\nimport MeetingRoom from './MeetingRoom';\n\nconst HomePage = () => {\n    const [meetingData, setMeetingData] = useState(null);\n\n    const startMeeting = async () => {\n        const SERVER_BASE_URL = 'https://opentok-routed.herokuapp.com/';\n\n        const response = await fetch(SERVER_BASE_URL + '/session');\n        const data = await response.json();\n\n        setMeetingData(data);\n    }\n\n    useEffect(startMeeting, []);\n\n    if (meetingData) return <MeetingRoom { ...meetingData } />\n\n    return <div>Loading........</div>;\n}\n\nexport default HomePage;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport HomePage from './HomePage';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HomePage />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}